{% extends 'multiple_gym/base.html' %}
{% load static %}

{% block title %}Add Vendor{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <div>
        <h2><i class="fas fa-truck me-2"></i>Add New Vendor</h2>
        <p class="text-muted mb-0">Add supplier/vendor information</p>
    </div>
    <a href="{% url 'inventory:vendor_list' %}" class="btn btn-outline-secondary">
        <i class="fas fa-arrow-left me-2"></i>Back to Vendors
    </a>
</div>

<div class="row">
    <div class="col-lg-8">
        <div class="card">
            <div class="card-header">
                <h5 class="card-title mb-0">
                    <i class="fas fa-building me-2"></i>Vendor Information
                </h5>
            </div>
            <div class="card-body">
                <form method="POST">
                    {% csrf_token %}
                    
                    <!-- Basic Information -->
                    <div class="row mb-4">
                        <div class="col-12">
                            <h6 class="text-primary mb-3">Basic Information</h6>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label class="form-label">Company Name *</label>
                            <input type="text" name="name" class="form-control" placeholder="e.g., FitEquip Solutions Pvt Ltd" required>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label class="form-label">Contact Person</label>
                            <input type="text" name="contact_person" class="form-control" placeholder="e.g., John Doe">
                        </div>
                        <div class="col-md-6 mb-3">
                            <label class="form-label">Email</label>
                            <input type="email" name="email" class="form-control" placeholder="e.g., contact@fitequip.com">
                        </div>
                        <div class="col-md-6 mb-3">
                            <label class="form-label">Phone Number *</label>
                            <input type="tel" name="phone" class="form-control" placeholder="e.g., 9876543210" maxlength="15" required>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label class="form-label">Alternate Phone</label>
                            <input type="tel" name="alternate_phone" class="form-control" placeholder="e.g., 9876543211" maxlength="15">
                        </div>
                        <div class="col-md-6 mb-3">
                            <label class="form-label">Vendor Rating</label>
                            <select name="rating" class="form-select">
                                <option value="5" selected>⭐⭐⭐⭐⭐ Excellent (5)</option>
                                <option value="4">⭐⭐⭐⭐ Good (4)</option>
                                <option value="3">⭐⭐⭐ Average (3)</option>
                                <option value="2">⭐⭐ Below Average (2)</option>
                                <option value="1">⭐ Poor (1)</option>
                            </select>
                        </div>
                    </div>

                    <!-- Address Information -->
                    <div class="row mb-4">
                        <div class="col-12">
                            <h6 class="text-primary mb-3">Address Information</h6>
                        </div>
                        <div class="col-12 mb-3">
                            <label class="form-label">Address *</label>
                            <textarea name="address" class="form-control" rows="3" placeholder="Complete business address" required></textarea>
                        </div>
                        <div class="col-md-4 mb-3">
                            <label class="form-label">City *</label>
                            <input type="text" name="city" class="form-control" placeholder="e.g., Mumbai" required>
                        </div>
                        <div class="col-md-4 mb-3">
                            <label class="form-label">State *</label>
                            <input type="text" name="state" class="form-control" placeholder="e.g., Maharashtra" required>
                        </div>
                        <div class="col-md-4 mb-3">
                            <label class="form-label">PIN Code *</label>
                            <input type="text" name="pincode" class="form-control" placeholder="e.g., 400001" maxlength="10" required>
                        </div>
                    </div>

                    <!-- Business Details -->
                    <div class="row mb-4">
                        <div class="col-12">
                            <h6 class="text-primary mb-3">Business Details (Optional)</h6>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label class="form-label">GST Number</label>
                            <input type="text" name="gst_number" class="form-control" placeholder="e.g., 27AABCU9603R1ZM" maxlength="20">
                        </div>
                        <div class="col-md-6 mb-3">
                            <label class="form-label">PAN Number</label>
                            <input type="text" name="pan_number" class="form-control" placeholder="e.g., AABCU9603R" maxlength="10" style="text-transform: uppercase;">
                        </div>
                    </div>

                    <!-- Additional Information -->
                    <div class="row mb-4">
                        <div class="col-12">
                            <h6 class="text-primary mb-3">Additional Information</h6>
                        </div>
                        <div class="col-12 mb-3">
                            <label class="form-label">Notes</label>
                            <textarea name="notes" class="form-control" rows="3" placeholder="Any additional notes about the vendor..."></textarea>
                        </div>
                    </div>

                    <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                        <a href="{% url 'inventory:vendor_list' %}" class="btn btn-outline-secondary me-md-2">
                            <i class="fas fa-times me-2"></i>Cancel
                        </a>
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save me-2"></i>Add Vendor
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    
    <!-- Sidebar -->
    <div class="col-lg-4">
        <div class="card bg-light">
            <div class="card-header">
                <h6 class="card-title mb-0">
                    <i class="fas fa-info-circle me-2"></i>Vendor Information Tips
                </h6>
            </div>
            <div class="card-body">
                <div class="mb-3">
                    <h6><i class="fas fa-lightbulb text-warning me-2"></i>Complete Information</h6>
                    <small class="text-muted">
                        Provide complete vendor details for better communication and record keeping.
                    </small>
                </div>
                
                <div class="mb-3">
                    <h6><i class="fas fa-lightbulb text-warning me-2"></i>Rating System</h6>
                    <small class="text-muted">
                        Rate vendors based on quality, delivery time, and service. This helps in vendor selection.
                    </small>
                </div>
                
                <div class="mb-3">
                    <h6><i class="fas fa-lightbulb text-warning me-2"></i>GST & PAN</h6>
                    <small class="text-muted">
                        Business registration details help in maintaining tax records and legal compliance.
                    </small>
                </div>
            </div>
        </div>
        
        <!-- Vendor Categories -->
        <div class="card mt-3">
            <div class="card-header">
                <h6 class="card-title mb-0">
                    <i class="fas fa-tags me-2"></i>Common Vendor Types
                </h6>
            </div>
            <div class="card-body">
                <div class="mb-2">
                    <span class="badge bg-primary me-1">Equipment Suppliers</span>
                </div>
                <div class="mb-2">
                    <span class="badge bg-success me-1">Supplement Distributors</span>
                </div>
                <div class="mb-2">
                    <span class="badge bg-info me-1">Maintenance Services</span>
                </div>
                <div class="mb-2">
                    <span class="badge bg-warning me-1">Cleaning Supplies</span>
                </div>
                <div class="mb-2">
                    <span class="badge bg-secondary me-1">General Suppliers</span>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Auto-format PAN number to uppercase
    const panInput = document.querySelector('input[name="pan_number"]');
    if (panInput) {
        panInput.addEventListener('input', function() {
            this.value = this.value.toUpperCase();
        });
    }
    
    // Phone number validation
    const phoneInputs = document.querySelectorAll('input[type="tel"]');
    phoneInputs.forEach(input => {
        input.addEventListener('input', function() {
            // Remove non-numeric characters
            this.value = this.value.replace(/[^0-9]/g, '');
        });
    });
    
    // PIN code validation
    const pincodeInput = document.querySelector('input[name="pincode"]');
    if (pincodeInput) {
        pincodeInput.addEventListener('input', function() {
            this.value = this.value.replace(/[^0-9]/g, '');
        });
    }
    
    // Form validation
    const form = document.querySelector('form');
    if (form) {
        form.addEventListener('submit', function(e) {
            const requiredFields = form.querySelectorAll('[required]');
            let isValid = true;
            
            requiredFields.forEach(field => {
                if (!field.value.trim()) {
                    field.classList.add('is-invalid');
                    isValid = false;
                } else {
                    field.classList.remove('is-invalid');
                }
            });
            
            if (!isValid) {
                e.preventDefault();
                alert('Please fill in all required fields.');
            }
        });
    }
});
</script>
{% endblock %}